# @server_url = https://dhoolia.ngrok.io
# @server_url = https://dhoolia.com
@server_url = http://localhost:3000

### Onboard: New Project
PUT {{server_url}}/onboard HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "repo_full_name": "pdhoolia/se-agent",
    "src_folder": "se_agent",
    "main_branch": "main"
}

### Onboard / Refresh: Existing Project
PUT {{server_url}}/onboard HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "repo_full_name": "pdhoolia/se-agent-test-repo",
    "src_folder": "se_agent_test_repo",
    "main_branch": "main"
}

### Test Issue Creation Event
POST {{server_url}}/webhook HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "action": "opened",
    "issue": {
        "number": 27,
        "title": "Fix the semantic vector strategy",
        "body": "Current implementation of semantic vector strategy seems to have an overly complex design.\n\nProject seems to maintain an instance of semantic vector localization strategy, which seems to manage various semantic vector collections for the project.\nWhile handling issue events, this instance of localization strategy is fetched and used.\nThis seems to be the wrong dependency structure without the right kind of separation of concerns.\n\nFollowing code refactoring is proposed:\n1. Separate the vector store management concern from localization strategy. Let the project be responsible for getting or creating a vector store. \n2. Rather than creating / loading the vector store as a member of the project during its construction, let's get or create it on demand. this will minimize the high memory requirement periods. Further only load the collection that is needed\n3. Let SemanticVectorSearchLocalizer be constructed by injecting the vector store into it. Let it only have the localize method.\n4. The methods to add / delete documents from the vector store are already available on langchain's VectorStore abstraction that we use. There is no point in replicating them once again. While adding documents to vector store (during semantic understanding) let's directly use the VectorStore's add_documents method.",
        "state": "open"
    },
    "repository": {
        "full_name": "pdhoolia/se-agent"
    }
}